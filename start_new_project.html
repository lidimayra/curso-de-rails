<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Minas Programam - Backend</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
    <link rel="stylesheet" href="node_modules/shower-ribbon/styles/screen-16x10.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.13/css/all.css" integrity="sha384-DNOHZ68U8hZfKXOrtjWvjxusGo9WQnrNx2sqG0tfsghAvtVlRW3tvkXWZh58N9jp" crossorigin="anonymous">
    <link rel="stylesheet" href="style.css">
    <link rel="shortcut icon" href="pictures/icon.png">
  </head>
  <body class="shower list">

    <header class="caption">
      <h1>Minas Programam</h1>
      <p>Back-end</p>
    </header>

    <section class="slide" id="cover">
      <div class="container">
        <div class="row justify-content-md-center">
          <div class="col-md-auto">
            <h2>Cria√ß√£o de um Projeto</h2>
          </div>
        </div>

        <div class="row justify-content-md-center">
          <div class="col-md-auto">
            <p>Minas Programam: Curso de Back-end</p>
          </div>
        </div>
      </div>

      <figure>
        <img class="cover" src="pictures/cover.png">
      </figure>
    </section>

    <section class="slide">
      <h2>Padr√£o MVC</h2>
      <img src="pictures/mvc.png" id="mvc">
    </section>

    <section class="slide">
      <h2>Retornando para o diret√≥rio anterior</h2>
        <p>
          Na etapa anterior, navegamos para dentro do diret√≥rio <i>todo</i>
          (localiza√ß√£o do nosso app de demonstra√ß√£o).
        </p>

        <p>
          Agora queremos retornar para o diret√≥rio <i>Sites</i> para criar um
          novo app.
        </p>

        <p>
          Para referenciar o diret√≥rio que se encontra
          <strong><u>acima</u></strong> do nosso, usamos <code>..</code>
        </p>
    </section>

    <section class="slide">
      <h2>Retornando para o diret√≥rio anterior</h2>
      <p>
        Conforme j√° aprendemos, o comando para navegar entre diret√≥rios √© o
        <code>cd</code>.
      </p>

      <p>
        Logo, para navegar para o diret√≥rio anterior, devemos executar:
      </p>

      <code>C:\Sites\todo><mark>cd ..</mark></code>

      <p class="next">
        <code>C:\Sites</code>
      </p>
    </section>

    <section class="slide">
      <h2>Iniciando um novo projeto Rails</h2>
      <p>
        Lembram das linhas de comando, que vimos listadas na
        <a href="http://localhost:3000/#25">etapa anterior</a>? Agora
        utilizaremos mais uma: <code>rails new &lt;nome_do_app&gt;</code>
        inicializa um novo projeto. Vamos construir um blog:
      </p>

      <p class="next">
        <code>C:\Sites><mark>rails new blog</mark></code>
      </p>

      <p class="next">
        Depois de criado, naveguem para o novo diret√≥rio. Vamos come√ßar a
        trabalhar no nosso blog!
      </p>
    </section>

    <section class="slide">
      <h2>Um ajuste inicial üöß</h2>
      <p>
        O projeto Rails, por padr√£o, traz uma gem chamada <i>coffee-script-source</i>.
        As vers√µes mais recentes dessa gem n√£o funcionam bem no Windows. Por isso,
        √© necess√°rio instalar uma vers√£o mais antiga para evitar problemas durante
        a renderiza√ß√£o das p√°ginas.
      </p>
    </section>

    <section class="slide">
      <h2>Adi√ß√£o do coffee-script-source 1.8.0</h2>
      <p>
        Abram o arquivo <i>Gemfile</i> no editor de texto e localizem
        o trecho abaixo.
      </p>

      <pre>
        <code># Use CoffeeScript for .coffee assets and views</code>
        <code><mark class="next">gem 'coffee-script-source', '1.8.0'</mark></code>
        <code>gem 'coffee-rails', '~ 4.2'</code>
      </pre>

      <p class="next">Agora adicionem a linha marcada em amarelo! ‚òùÔ∏è</p>
    </section>

    <section class="slide">
      <h2>Atualiza√ß√£o das gems seguindo o novo Gemfile</h2>
      <p>Agora, no terminal de comando execute:</p>

      <p>
        <code>C:\Sites\blog><mark>bundle update</mark></code>
      </p>

      <p class="next">Ap√≥s esse pequeno ajuste, podemos seguir com o start do projeto!</p>
    </section>

    <section class="slide">
      <h2>Subindo o servidor Rails</h2>
      <p>
        Assim como fizemos com o nosso app demonstrativo, vamos executar
        o comando para subir o servidor.
      </p>

      <p>
        <code>C:\Sites\blog><mark>rails server</mark></code>
      </p>

      <p class="next">
        Com o servidor em execu√ß√£o, acessem a aplica√ß√£o em
        <a href="http://localhost:3000" target="_blank">http://localhost:3000</a>.
      </p>
    </section>

    <section class="slide">
      <h2>Yay!</h2>
      <img src="pictures/screenshots/youre_on_rails.png" class="screenshot">
      <ul class="list-right">
        <li>Eba, temos uma aplica√ß√£o rodando! üçæ</li>
      </ul>
    </section>

    <section class="slide">
      <h2>Um blog precisa de posts, certo?</h2>
      <p>
        Vamos pensar nos posts como um recurso do nosso projeto.
      </p>

      <p>
        Queremos que estejam dispon√≠veis em <code>/posts</code>, portanto
        a primeira coisa que faremos √© criar essa rota.
      </p>
    </section>

    <section class="slide">
      <h2>Configura√ß√£o da rota</h2>
      <p>
        No editor de texto, abram o <code>config/routes.rb</code>.
        Para adicionar as rotas padr√£o do Rails, usamos o m√©todo
        <code>resources</code>, e passamos o nome do recurso como um s√≠mbolo
        (usando sinal de <code>:</code> no in√≠cio).
      </p>

      <pre>
        <code>Rails.application.routes.draw do</code>
        <code>  <span class="next"><mark>resources :posts</mark></span></code>
        <code>end</code>
      </pre>

      <p class="next">
        Agora acessem <a href="http://localhost:3000/posts" target="_blank">
        http://localhost:3000/posts</a>. O que acontece?
      </p>
    </section>

    <section class="slide">
      <h2>Ops!</h2>
      <img src="pictures/screenshots/controller_missing.png" class="screenshot">
      <ul class="list-right">
        <li>Temos um exemplo de tela de erro do Rails.</li>
        <li class="next">
          A mensagem informa que o controller <i>PostsController</i> n√£o
          foi implementado.
        </li>
      </ul>

      <p class="next note">√ìtimo! Agora sabemos o que precisamos fazer!</li>
    </section>

    <section class="slide">
      <h2>Cria√ß√£o do PostsController</h2>
      <p>
        Utilizaremos outra linha de comando:
        <code>rails generate</code>.
      </p>

      <p>
        Esta linha indica a chamada de <i>generators</i>.
        <i>Generators</i> permitem que templates de c√≥digo sejam
        gerados automaticamente. Para gerar os templates de controller:
      </p>

      <p>
        <code>C:\Sites\blog><mark>rails generate controller posts</mark></code>
      </p>

      <p class="next">
        Agora acessem <a href="http://localhost:3000/posts" target="_blank">
        http://localhost:3000/posts</a>. O que acontece?
      </p>
    </section>

    <section class="slide">
      <h2>Um novo erro: a√ß√£o index n√£o encontrada</h2>
      <img src="pictures/screenshots/index_missing.png" class="screenshot">
      <ul class="list-right">
        <li>
          J√° se espera que <code>/posts</code> contenha uma lista de posts.
        </li>

        <li>
          Chamamos esta a√ß√£o que lista os recursos de <code>index</code>.
        </li>

        <li>
          A mensagem informa que n√£o temos uma <code>index</code> definida.
        </li>
      </ul>

      <p class="next note">Vamos implement√°-la!</p>
    </section>

    <section class="slide">
      <h2>Implementa√ß√£o de index em PostsController</h2>
      <p>
        Em <code>app/controllers/posts_controller.rb</code>, insiram:
      </p>

      <pre>
        <code>class PostsController < ApplicationController</code>
        <code>  <mark>def index</mark> </code>
        <code>    <mark>render plain: 'Blog Minas Programam'</mark></code>
        <code>  <mark>end</mark></code>
        <code>end</code>
      </pre>

      <p class="next">
        Salvem o arquivo e acessem <a href="http://localhost:3000/posts" target="_blank">
        http://localhost:3000/posts</a>.
      </p>
    </section>

    <section class="slide">
      <h2>Renderiza√ß√£o de um texto simples</h2>
      <img src="pictures/screenshots/render_plain.png" class="screenshot">
      <ul class="list-right">
        <li>Percebem as a√ß√µes executadas pelo controller?</li>
        <li class="next">Recebeu a solicita√ß√£o de uma a√ß√£o index</li>
        <li class="next">Retornou o resultado a ser exibido.</li>
        </li>
      </ul>

      <p class="note next">
        Mas queremos renderizar p√°ginas mais complexas do que texto puro, certo?
      </p>
    </section>

    <section class="slide">
      <h2>Implementa√ß√£o da View (o V do MVC)</h2>
      <p>
        Queremos construir p√°ginas HTML que ser√£o renderizadas quando
        <code>/posts</code> for acessado. Vamos contruir um exemplo simples.
        Abram um arquivo novo e repliquem o trecho abaixo:
      </p>

      <pre>
        <code>&lt;html&gt;</code>
        <code>  &lt;center&gt;&lt;h2&gt;Blog Minas Programam&lt;/h2&gt;&lt;/center&gt;</code>
        <code>&lt;/html&gt;</code>
      </pre>

      <p>Salvem esse arquivo em <code>app/views/posts/index.html</code></p>
    </section>

    <section class="slide">
      <h2>Ajustando o controller</h2>
      <p>
        Agora precisamos ajustar o controller, pois n√£o queremos mais renderizar
        o texto puro, queremos que a view <code>index.html</code> seja exibida
        no lugar.
      </p>

      <p>
        Remova o c√≥digo que foi adicionado no slide 15, mantendo apenas a defini√ß√£o
        da classe <code>PostsController</code>.
      </p>

      <pre>
        <code>class PostsController < ApplicationController</code>
        <code>end</code>
      </pre>

      <p class="next">
        Salvem o arquivo e acessem <a href="http://localhost:3000/posts" target="_blank">
        http://localhost:3000/posts</a>.
      </p>
    </section>

    <section class="slide">
      <h2>Renderiza√ß√£o de uma p√°gina HTML</h2>
      <img src="pictures/screenshots/render_html.png" class="screenshot">
      <ul class="list-right">
        <li>
          Percebam que o texto agora est√° sendo exibido centralizado
          e em tamanho maior devido a formata√ß√£o HTML.
        </li>
      </ul>
    </section>

    <section class="slide">
      <h2>Scaffold</h2>
        Para gerar o Scaffold de um post contendo t√≠tulo e conte√∫do:
      <p>
        <code>C:\Sites\blog><mark>rails generate scaffold post titulo:string conteudo:text</mark></code>
      </p>

      <p>
        Acessem <a href="http://localhost:3000/posts" target="_blank">http://localhost:3000/posts</a>.
      </p>
    </section>

    <section class="slide">
      <h2>Erro! Migra√ß√µes pendentes</h2>
      <img src="pictures/screenshots/scaffold_pending_migrations.png" class="screenshot">
      <ul class="list-right">
        <li>A estrutura do banco de dados foi alterada</li>
        <li>Precisamos rodar as migra√ß√µes</li>
        <li>Vimos isso <a href="setup.html#22" target="_blank">antes</a>, lembram?</li>
      </ul>

      <p class="next">
        <code>C:\Sites\blog><mark>bundle exec rake db:migrate</mark></code>
      </p>

      <p class="next">
        Recarreguem a listagem de posts novamente.
      </p>
    </section>

    <section class="slide">
      <h2>Lista de posts</h2>
      <img src="pictures/screenshots/scaffold_index.png" class="screenshot">
      <ul class="list-right">
        <li>Temos uma p√°gina de posts!!</li>
        <li>Cliquem em <i>New post</i> para criar o primeiro post</li>
      </ul>
    </section>

    <section class="slide">
      <h2>Trabalhando com os registros</h2>
      <ul>
        <li>Sintam-se √† vontade para manusear as funcionalidades do projeto</li>
        <li>Tentem visualizar, atualizar e remover registros.</li>
      </ul>
    </section>

    <section class="slide">
      <h2>Final da etapa de cria√ß√£o</h2>
      <p>
        Criamos o nosso pr√≥prio blog utilizando o Scaffold do Rails.
      </p>

      <p>
        Na etapa seguinte, vamos customizar cada uma das camadas do
        projeto.
      </p>

      <p>
        <a href="mvc.html">
          <span class='fa fa-arrow-circle-right'></span>
            Models, Views e Controllers
        </a>
      </p>
    </section>

    <footer class="badge">
      <a href="https://github.com/shower/shower">Powered by Shower</a>
    </footer>

    <div class="progress"></div>

    <script src="node_modules/shower-core/shower.min.js"></script>
    <!-- Copyright ¬© 2018 Yours Truly, Famous Inc. -->

  </body>
</html>
